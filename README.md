# Проектная работа "Веб-ларек"
## 1. Используемый стек и структура 

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## 2. Функциональные требования к приложению
```
Главная страница содержит каталог товаров, при нажатии на карточку товара открывается модальное окно с детальной информацией о товаре, при нажатии на иконку корзины открывается корзина.
При просмотре конкретного товара показана детальная информация о товаре, при нажатии на кнопку «Купить» товар добавляется в корзину, если не был добавлен в корзину раньше, при нажатии на кнопку «Убрать» товар удаляется из корзины.
Оформление товара:
Первый шаг:
- выбор способа оплаты;
- ввод адреса доставки;
- если адрес доставки не введён, появляется сообщение об ошибке.
Второй шаг:
- ввод почты и телефона покупателя;
- если одно из полей не заполнено, появляется сообщение об ошибке;
- при нажатии на кнопку оплаты появляется сообщение об успешной оплате и товары удаляются из корзины.
Модальные окна закрываются по клику вне модального окна и по клику на иконку «Закрыть» (крестик).
Кнопка перехода к следующему шагу становится доступна только после выполнения действий на текущей странице (выбора товара, способа оплаты, заполнения данных о покупателе).
```

## 3. Инструкция по сборке и запуску

### Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## 4. Описание базовых классов, их предназначение и функции.

### Описание базовых классов: 

#### Класс Api

Основная функция: взаимодействие с API. 
Путь: .\src\components\base\api.ts
Методы:
get - выполняет GET запрос к указанному URI, возвращает Promise с данными;
post - выполняет POST запрос к указанному URI и HTTP-методом.

#### Класс EventEmitter

Основная функция: отвечает за работу событий в системе, за их отправку и обработку. 
Путь: .\src\components\base\events.ts
Методы:
on - устанавливает обработчик callback на событие;
emit - инициализирует событие;
trigger - создает функцию, которая генерирует событие.

## 4. Описание компонентов, их функций и связей с другими компонентами

Приложение разработано на основе MVP-архитектуры. 

MVP (Model-View-Presenter) — это архитектурный паттерн, который разделяет приложение на три основные компоненты:

Model (Модель): отвечает за бизнес-логику и работу с данными. Это могут быть классы или интерфейсы, реализующие работу с данными, API, базой данных и т.п.

View (Представление): отвечает за отображение данных пользователю и обработку пользовательских событий. DOM-элементы, компоненты UI.

Presenter (Презентер): посредник между Model и View. Он получает пользовательские события из View, обрабатывает их, взаимодействует с Model для получения или изменения данных и обновляет View.

### Model (Модель)

#### Класс CardData
```
Функция: Класс хранит и обрабатывает все данные по товарам.
Поля: 
cardId: тип: string — идентификатор выбранного товара;
cards: ICard[] — массив товаров, которые видны на странице;
Методы:
setCard(cards: ICard[]): void — метод устанавливает список товаров и осуществляет изменение состояния;
setDescription(cards: ICard): void —  метод для просмотра описания товара.

```
#### Класс OrderData
```
Функция: Формирование и отправка заказа.
Поля:
payment: тип: string — способ оплаты;
email: тип: string — почта покупателя;
address: тип: string — адрес покупателя;
phone: тип: number — номер телефона покупателя;
eventEmitter — обработка события.
Методы:
setValidateOrder(field: keyof Omit<IOrder, 'cards' | 'total'>): boolean — метод устанавливает ошибки валидации;
getErrors(): { field: string, message: string }[] — метод возвращает ошибки.
```
#### Класс CartPopup 
```
Функция: Содержит товары, позволяет их добавлять и удалять из корзины.
Поля:
cards: ICard[] - массив товаров, которые добавили в корзину.
Методы:
addCard(card: ICard): void — метод добавляет товар и обновляет общую стоимость;
removeCard(CardId: string): void — метод удаляет товар и обновляет общую стоимость;
updateCart(CarId: string, quantity: number): void — метод обновляет количество и пересчитывает общую стоимость;
clearCart(): void — метод очищает корзину;
getTotal(): number —  метод возвращает состояние суммы товаров в корзине.
```
### View (Представление) 

#### Класс Page
```
Функция: расставляет элементы в предназначенные для них контейнеры, отображает количество товаров в корзине;
Поля:
container: HTMLElement - основной контейнер страницы;
containerGallery: HTMLElement - контейнер для товаров;
counterCart: HTMLElement - счетчик товаров в корзине;
buttonCart: HTMLButtonElement - кнопка корзины.
Методы: 
updateCartCounter - обновление счетчика корзины;
handleCartClick - обработчик клика по корзине.
```
#### Класс Card
```
Функция: Отображает данные карточки: полное описание, цену, изображение и кнопки КУПИТЬ и УДАЛИТЬ (крестик)
Поля:
cardContainer: HTMLElement - контейнер попапа;
cardTitle: HTMLElement - название товара;
cardDescription: HTMLElement - описание товара;
cardPrice: HTMLElement - цена товара;
cardImage: HTMLImageElement - изображение товара;
addButton: HTMLButtonElement - кнопка КУПИТЬ;
deleteButton: HTMLButtonElement - кнопка УДАЛИТЬ.
Методы:
render - отображение информации
handleDeleteButton - обработчик клика по кнопке УДАЛИТЬ;
handleAddButton - обработчик клика по кнопке КУПИТЬ.
```
#### Класс Cart
```
Функция: Отвечает за содержимое в корзине.
Поля:
cartContainer: HTMLElement - контейнер для перечня товаров;
cartButton: HTMLButtonElement - кнопка оформления заказа;
cartPrice - общая стоимость;
Методы: 
render - отображение списка товаров в корзине;
updatePrice - обновление общей стоимости;
clear - очистка корзины.
```
#### Класс Popup 
```
Функция: Отображает попапы.
Поля: 
popupContainer: HTMLElement - контейнер для попапа;
popupContent: HTMLElement - элемент для содержимого попапа;
closeButton: HTMLButtonElement - кнопка ЗАКРЫТЬ (крестик);
Методы: 
open - открытие попапа
close - закрытие попапа
render - отображение попапа
```
#### Класс FormPrice
```
Функция: Отображает форму с оплатой
Поля: 
priceButton: HTMLInputElement — кнопки выбора способа оплаты; 
address: HTMLInputElement — адрес доставки;
submitButton: HTMLButtonElement — кнопка ДАЛЕЕ.
Методы: 
setData — установка значения поля;
setError — отображение ошибки, если значения не корректны.
```
#### Класс FormContact
```
Функция: Отображает форму с контактными данными.
Поля: 
email: HTMLInputElement — ввод email;
phone: HTMLInputElement — ввод номера телефона;
payButton: HTMLButtonElement — кнопка ОПЛАТИТЬ.
Методы: 
setData — установка значения поля;
setError — отображение ошибки, если значения не корректны.
```
#### Класс Success
```
Функция: Отображает заказчику, что заказ успешно офорлмлен
Поля:
successPrice: HTMLElement — общая сумма заказа (списано ...); 
closeButton: HTMLButtonElement — кнопка ЗАКРЫТЬ (крестик);
newButton; HTMLButtonElement - кнопка ЗА НОВЫМИ ПОКУПКАМИ;
```
### Presenter (Презентер)

К основным функциям презертера относятся:
- обработка пользовательских событий:
презентер слушает события, исходящие от View;
- взаимодействие с моделью: он вызывает методы модели для получения или изменения данных.
- обновление View:
После получения данных или выполнения логики, презентер обновляет интерфейс через методы View;

Весь код, связанный с бизнес-правилами и обработкой данных, находится внутри презентера, путь файла: .\src\index.ts.
